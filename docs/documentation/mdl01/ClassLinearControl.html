<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Welcome to the web interface of DyCon Toolbox, the computational platform developed within the <a href='https://cmc.deusto.eus/dycon/' target='_blank'>ERC DyCon - Dynamic Control</a> project.">



	<link rel='shortcut icon' type='image/png' href='/dycon-platform-documentation/favicon.png' />

    <title>LinearControl - DyCon Platform</title>

    <link rel="canonical" href="https://DeustoTech.github.io/dycon-platform-documentation/documentation/mdl01/ClassLinearControl">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="https://DeustoTech.github.io/dycon-platform-documentation/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="https://DeustoTech.github.io/dycon-platform-documentation/css/clean-blog.css">

	<!-- Adjust Colors -->
    <link rel="stylesheet" href="https://DeustoTech.github.io/dycon-platform-documentation/colorscheme.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="https://DeustoTech.github.io/dycon-platform-documentation/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
  	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
  	<link href="https://fonts.googleapis.com/css?family=Lusitana" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	<!-- Math Jax -->
	<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']]
    },
		TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    /*CommonHTML: {
      scale: 300
    }*/
	});
	</script>

	<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js" type="text/javascript"></script>-->

    <!-- jQuery -->
	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

	<!-- Custom Theme JavaScript -->
    <script src="https://DeustoTech.github.io/dycon-platform-documentation/js/clean-blog.min.js "></script>
    
 	<!-- 404  JavaScript -->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/dycon-platform-documentation/">
                 <img src="https://DeustoTech.github.io//dycon-platform-documentation/assets/logo_DyConToolbox_v001.png" >
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/dycon-platform-documentation/">Home</a>
                </li>
                
                
                <li>
                    <a href="/dycon-platform-documentation/projects/documentation">Documentation</a>
                </li>
                
                
                
                
                
                <li>
                    <a href="/dycon-platform-documentation/projects/tutorials">Tutorials</a>
                </li>
                
                
                
                <li>
                    <a href="/dycon-platform-documentation/Download">Downloads</a>
                </li>
                
                <li>
                        <a href="http://cmc.deusto.eus/">Chair of Computational Mathematics</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header">
    <div class="container" style="padding-top: 70px;">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading" style="padding: 0px 0">
                    <h1 class="post-title">LinearControl <small>Class</small></h1>
				</div>
				
				<h2>Description</h2>
				LinearControl is a subclass of the ControlProblem class, so it is also a control problem. However, we assume that the differential equation we want to control is linear. This gives us access to new functions such as the conjugate gradient. In addition, it lightens the computational cost and some functions such as GetAdjointProblem.

                <h2>Example</h2>
				<p>First define the vectors</p>

<script type="math/tex; mode=display">symY = \left( \begin{matrix}   y1 \\                                   y2                  \end{matrix} \right)    symU = \left( \begin{matrix}   u1 \\                                   u2                   \end{matrix} \right)</script>

<p>We will use symbolic variables to define them.</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">syms</span> <span class="n">t</span>
<span class="n">symY</span> <span class="o">=</span> <span class="n">SymsVector</span><span class="p">(</span><span class="s1">'y'</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">symU</span> <span class="o">=</span> <span class="n">SymsVector</span><span class="p">(</span><span class="s1">'u'</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>Ordinary differential equation</strong></p>

<p>In this case we will define the following differential equation</p>

<script type="math/tex; mode=display">% <![CDATA[
\dot{\textbf{Y}} = \left( \begin{matrix}   -1  &  1 \\    0  & -2 \\   \end{matrix} \right) * \textbf{Y} +   \left( \begin{matrix}    1  &  0 \\    0  &  1 \\   \end{matrix} \right) * \textbf{U} %]]></script>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="p">[</span> <span class="o">-</span><span class="mi">1</span>  <span class="mi">1</span>  <span class="p">;</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">2</span> <span class="p">];</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">[</span>  <span class="mi">1</span>  <span class="mi">0</span>  <span class="p">;</span> <span class="mi">0</span>  <span class="mi">1</span> <span class="p">];</span>
</code></pre></div></div>

<p>To do this, we create an object differential equation. We can do it with the ODE constructor, in the following way.</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">odeEqn</span> <span class="o">=</span> <span class="n">LinearODE</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">);</span>
<span class="n">Y0</span> <span class="o">=</span> <span class="p">[</span>  <span class="mi">0</span><span class="p">;</span><span class="mi">1</span> <span class="p">];</span>
<span class="n">odeEqn</span><span class="o">.</span><span class="n">Y0</span> <span class="o">=</span> <span class="n">Y0</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Cost Functional</strong></p>

<script type="math/tex; mode=display">J = \Psi(Y(T),t) + \int_0^T L(Y(t,U),U(t),t) dt</script>

<p>For this, we choose a target of vector state</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">YT</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">;</span> <span class="mi">4</span><span class="p">];</span>
</code></pre></div></div>

<p>Then,</p>

<script type="math/tex; mode=display">\Psi(Y,t) = \vert Y(T) - Y(t) \vert ^2</script>

<script type="math/tex; mode=display">L(Y(t,U),U(t),t) = \beta \vert U(t) \vert^2</script>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">symPsi</span>  <span class="o">=</span> <span class="p">(</span><span class="n">YT</span> <span class="o">-</span> <span class="n">symY</span><span class="p">)</span><span class="o">.'*</span><span class="p">(</span><span class="n">YT</span> <span class="o">-</span> <span class="n">symY</span><span class="p">);</span>
<span class="n">symL</span>    <span class="o">=</span> <span class="mf">0.0001</span><span class="o">*</span><span class="p">(</span><span class="n">symU</span><span class="o">.'*</span><span class="n">symU</span><span class="p">);</span>
</code></pre></div></div>

<p>For last, you an create the functional object</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Jfun</span> <span class="o">=</span> <span class="n">Functional</span><span class="p">(</span><span class="n">symPsi</span><span class="p">,</span><span class="n">symL</span><span class="p">,</span><span class="n">symY</span><span class="p">,</span><span class="n">symU</span><span class="p">);</span>
</code></pre></div></div>

<p>Now, We can create the control problem</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">iCP1</span> <span class="o">=</span> <span class="n">LinearControl</span><span class="p">(</span><span class="n">odeEqn</span><span class="p">,</span><span class="n">Jfun</span><span class="p">);</span>
</code></pre></div></div>

<p>and solve by Classical Gradient Method</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">GradientMethod</span><span class="p">(</span><span class="n">iCP1</span><span class="p">)</span>
</code></pre></div></div>

<p>Solve the equation without control</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">solve</span><span class="p">(</span><span class="n">odeEqn</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">odeEqn</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="https://DeustoTech.github.io//dycon-platform-documentation/assets/imgs/MDL01/class/main/LinearControl/copiaRM_01.png" alt="" /></p>

<p>And compare the controlled solution</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">plot</span><span class="p">(</span><span class="n">iCP1</span><span class="o">.</span><span class="n">ode</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="https://DeustoTech.github.io//dycon-platform-documentation/assets/imgs/MDL01/class/main/LinearControl/copiaRM_02.png" alt="" /></p>




				<h1>Properties</h1>
				<table>
					<tr>
						<th>Name</th>
            <th>Type</th>
            <th>Default Value</th>
            <th>Description</th>
					</tr>
					
						<tr>
							<th>gramian</th>
							<th>double</th>
							<th>none</th>
							<th>Gramian Matrix</th>
						</tr>
					
						<tr>
							<th>ss</th>
							<th>double</th>
							<th>space</th>
							<th>MATLAB class that represent de dynamics</th>
						</tr>
					
				</table>
        <!-- CONSTRUCTOR  -->
				<h1>Contructor</h1>
				<h3>Mandatory Input Parameters</h3>
				<table>
					<tr>
						<th>Name</th>
						<th>Description</th>
						<th>class</th>
					</tr>
					
						<tr>
							<th>iode</th>
							<th>Ordinary Differential Equation represent the constrain to minimization the functional</th>
							<th>LinearODE</th>
						</tr>
					
						<tr>
							<th>Jfun</th>
							<th>Cost function to obtain the optimal control</th>
							<th>Functional</th>
						</tr>
					

				</table>

				<!-- OPTIONAL INPUTS  -->

				
					<h3>Optional Input Parameters</h3>
					<table>
						<tr>
							<th>Name</th>
							<th>Description</th>
							<th>class</th>
						</tr>
						
							<tr>
								<th>T</th>
								<th>This parameter represent the final time of simulation.</th>
								<th>double</th>
							</tr>
						
							<tr>
								<th>dt</th>
								<th>This parameter represent is the interval to interpolate the control, $u$, and state, $y$, to obtain the functional $J$ and the gradient $dH/du$</th>
								<th>double</th>
							</tr>
						
					</table>
				

				<!--  OUTPUTS -->
				
					<h3>Output Parameters</h3>
					<table>
						<tr>
							<th>Name</th>
							<th>Description</th>
							<th>class</th>
						</tr>
						
						<tr>
							<th>obj</th>
							<th>ControlProblem MATLAB class</th>
							<th>ControlProblem</th>
						</tr>
						
					</table>
				


				<h1>Methods</h1>
				<table>
					<tr>
						<th>Name</th>
						<th>Description</th>
					</tr>
					
					  
					
					  
						<tr>
							
							
							<th><a href="/dycon-platform-documentation/documentation/mdl01/linearcontrol/ConjugateGradientDescent">ConjugateGradientDescent</a></th>
							<th>This method is able to update the value of the control by decreasing the value of the functional.</th>
						</tr>
					  
					
					  
						<tr>
							
							
							<th><a href="/dycon-platform-documentation/documentation/mdl01/linearcontrol/GetAdjointProblem">GetAdjointProblem</a></th>
							<th>Method capable of obtaining the attached problem and its final condition.</th>
						</tr>
					  
					
				</table>


            </div>
        </div>
    </div>
</header>


    <!-- Footer -->
<footer>
  <hr>
  <div class="container">
    <div class="row">
      <div class="col-md-10">
        <ul class="list-inline text-center">
          <li>
            <img style="width: 200px;" src="/dycon-platform-documentation/img/logos/logo_DyCon.png " alt="">
          </li>
          <li>
            <img style="width: 250px;" src="/dycon-platform-documentation/img/logos/logo_CCM_subDerecha_v002.png " alt="">
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>


</body>

</html>
